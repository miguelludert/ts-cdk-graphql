"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const commander_1 = require("commander");
const app_sync_gql_schema_1 = require("../typescript/app-sync-gql-schema");
const fs_1 = require("fs");
const path_1 = require("path");
commander_1.program
    .command("dump <source> <destination>")
    .action((source, destination) => {
    // dump schema
    const fromRoot = (dir) => path_1.join(__dirname, "../../", dir);
    const schemaText = fs_1.readFileSync(fromRoot(source), 'utf8');
    const providers = app_sync_gql_schema_1.getProviders();
    const cfSchema = app_sync_gql_schema_1.getCfSchema(schemaText, providers);
    fs_1.writeFileSync(fromRoot(destination), JSON.stringify(cfSchema, null, 2), "utf8");
    console.info(`File written to ${fromRoot(destination)}`);
});
commander_1.program.parse(process.argv);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY2xpL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUNBQWlEO0FBQ2pELDJFQUE4RTtBQUM5RSwyQkFBaUQ7QUFDakQsK0JBQTRCO0FBRTVCLG1CQUFPO0tBQ0wsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0tBQ3RDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsRUFBRTtJQUMvQixjQUFjO0lBQ2QsTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLFdBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sVUFBVSxHQUFHLGlCQUFZLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pELE1BQU0sU0FBUyxHQUFHLGtDQUFZLEVBQUUsQ0FBQztJQUNqQyxNQUFNLFFBQVEsR0FBRyxpQ0FBVyxDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNwRCxrQkFBYSxDQUNaLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFDckIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUNqQyxNQUFNLENBQ04sQ0FBQztJQUNGLE9BQU8sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDMUQsQ0FBQyxDQUFDLENBQUM7QUFDQSxtQkFBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXNjcmlwdGlvbiwgcHJvZ3JhbSB9IGZyb20gXCJjb21tYW5kZXJcIjtcbmltcG9ydCB7IGdldFByb3ZpZGVycywgZ2V0Q2ZTY2hlbWEgfSBmcm9tIFwiLi4vdHlwZXNjcmlwdC9hcHAtc3luYy1ncWwtc2NoZW1hXCI7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuXG5wcm9ncmFtXG5cdC5jb21tYW5kKFwiZHVtcCA8c291cmNlPiA8ZGVzdGluYXRpb24+XCIpXG5cdC5hY3Rpb24oKHNvdXJjZSwgZGVzdGluYXRpb24pID0+IHtcblx0XHQvLyBkdW1wIHNjaGVtYVxuXHRcdGNvbnN0IGZyb21Sb290ID0gKGRpcikgPT4gam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vXCIsIGRpcik7XG5cdFx0Y29uc3Qgc2NoZW1hVGV4dCA9IHJlYWRGaWxlU3luYyhmcm9tUm9vdChzb3VyY2UpLCd1dGY4Jyk7XG5cdFx0Y29uc3QgcHJvdmlkZXJzID0gZ2V0UHJvdmlkZXJzKCk7XG5cdFx0Y29uc3QgY2ZTY2hlbWEgPSBnZXRDZlNjaGVtYShzY2hlbWFUZXh0LCBwcm92aWRlcnMpO1xuXHRcdHdyaXRlRmlsZVN5bmMoXG5cdFx0XHRmcm9tUm9vdChkZXN0aW5hdGlvbiksXG5cdFx0XHRKU09OLnN0cmluZ2lmeShjZlNjaGVtYSwgbnVsbCwgMiksXG5cdFx0XHRcInV0ZjhcIixcblx0XHQpO1xuXHRcdGNvbnNvbGUuaW5mbyhgRmlsZSB3cml0dGVuIHRvICR7ZnJvbVJvb3QoZGVzdGluYXRpb24pfWApO1xuXHR9KTtcbiAgICBwcm9ncmFtLnBhcnNlKHByb2Nlc3MuYXJndik7XG4iXX0=